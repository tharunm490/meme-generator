<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Viksha Coding Meme Generator</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body
    class="bg-gradient-to-br from-blue-400 to-purple-600 min-h-screen flex items-center justify-center p-4 relative"
  >
    <!-- Removed overflow-hidden from body to allow scrolling -->
    <!-- Added py-8 for vertical padding, ensuring content isn't cut off -->

    <!-- Animated background elements -->
    <div class="absolute inset-0 z-0 overflow-hidden">
      <div class="shape-blob one animate-blob"></div>
      <div class="shape-blob two animate-blob animation-delay-2000"></div>
      <div class="shape-blob three animate-blob animation-delay-4000"></div>
      <div class="shape-blob four animate-blob animation-delay-6000"></div>
    </div>

    <div
      class="relative z-10 bg-white p-8 rounded-3xl shadow-2xl max-w-4xl w-full mx-auto text-center transform transition-all duration-500 ease-in-out scale-95 hover:scale-100 animate-fade-in-up border-4 border-transparent bg-clip-padding backdrop-filter backdrop-blur-lg bg-opacity-80 border-opacity-60 border-gradient-br from-blue-300 to-purple-500 my-8"
    >
      <!-- Increased max-w to 4xl for wider layout, added my-8 for vertical margin -->

      <h1
        class="text-4xl font-extrabold text-gray-900 mb-8 animate-slide-in-left"
      >
        <i class="fas fa-terminal text-blue-600 mr-3"></i> Welcome to Viksha
        Coding Meme Generator
      </h1>
      <p
        class="text-gray-700 mb-10 text-lg animate-fade-in animation-delay-500"
      >
        Unleash your inner coder's humor! Get a meme tailored to your skills.
      </p>

      <form action="/generate_meme" method="post" class="space-y-8">
        <div class="text-left animate-fade-in animation-delay-700">
          <label class="block text-gray-800 text-sm font-bold mb-3">
            <i class="fas fa-star text-yellow-500 mr-2"></i>Choose your
            self-assessed skill level:
          </label>
          <div class="flex flex-wrap justify-center gap-6 mb-6">
            <label
              class="inline-flex items-center group cursor-pointer p-3 rounded-lg bg-gray-50 hover:bg-purple-100 transition duration-200 shadow-sm"
            >
              <input
                type="radio"
                name="skill_level"
                value="beginner"
                class="form-radio h-5 w-5 text-purple-600 focus:ring-purple-500 transition duration-200"
                checked
                onchange="updateQuestion()"
              />
              <span
                class="ml-3 text-gray-700 font-medium group-hover:text-purple-800 transition duration-200"
                >Beginner</span
              >
            </label>
            <label
              class="inline-flex items-center group cursor-pointer p-3 rounded-lg bg-gray-50 hover:bg-purple-100 transition duration-200 shadow-sm"
            >
              <input
                type="radio"
                name="skill_level"
                value="intermediate"
                class="form-radio h-5 w-5 text-purple-600 focus:ring-purple-500 transition duration-200"
                onchange="updateQuestion()"
              />
              <span
                class="ml-3 text-gray-700 font-medium group-hover:text-purple-800 transition duration-200"
                >Intermediate</span
              >
            </label>
            <label
              class="inline-flex items-center group cursor-pointer p-3 rounded-lg bg-gray-50 hover:bg-purple-100 transition duration-200 shadow-sm"
            >
              <input
                type="radio"
                name="skill_level"
                value="expert"
                class="form-radio h-5 w-5 text-purple-600 focus:ring-purple-500 transition duration-200"
                onchange="updateQuestion()"
              />
              <span
                class="ml-3 text-gray-700 font-medium group-hover:text-purple-800 transition duration-200"
                >Expert</span
              >
            </label>
          </div>

          <label class="block text-gray-800 text-sm font-bold mb-3">
            <i class="fas fa-code text-green-600 mr-2"></i>Choose your preferred
            coding language:
          </label>
          <div class="flex flex-wrap justify-center gap-6">
            {% for lang, data in questions.items() %}
            <label
              class="inline-flex items-center group cursor-pointer p-3 rounded-lg bg-gray-50 hover:bg-blue-100 transition duration-200 shadow-sm"
            >
              <input
                type="radio"
                name="coding_language"
                value="{{ lang }}"
                class="form-radio h-5 w-5 text-blue-600 focus:ring-blue-500 transition duration-200"
                {%
                if
                loop.first
                %}checked{%
                endif
                %}
                onchange="updateQuestion()"
              />
              <span
                class="ml-3 text-gray-700 font-medium group-hover:text-blue-800 transition duration-200"
                >{{ lang.upper() }}</span
              >
            </label>
            {% endfor %}
          </div>
        </div>

        <div class="text-left mt-8 animate-fade-in animation-delay-1000">
          <label
            for="question_text"
            class="block text-gray-800 text-sm font-bold mb-3"
          >
            <i class="fas fa-question-circle text-orange-500 mr-2"></i>Question:
          </label>
          <p
            id="question_text"
            class="text-gray-900 text-lg font-semibold mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200 shadow-inner animate-pulse-fade"
          ></p>
          <textarea
            name="answer"
            id="answer_input"
            rows="4"
            class="shadow-inner appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-4 focus:ring-blue-400 focus:border-blue-500 transition duration-300 ease-in-out placeholder-gray-400 focus:placeholder-gray-600 text-base"
          ></textarea>
        </div>

        <button
          type="submit"
          class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-extrabold py-3 px-6 rounded-xl shadow-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-75 transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 animate-bounce-once"
        >
          <i class="fas fa-hat-wizard mr-2"></i> Generate My Meme!
        </button>
      </form>
    </div>

    <script>
      // JavaScript to dynamically display the question based on selected language and skill level
      const allQuestions = {{ questions | tojson }}; // Flask passes the full nested dict

      function updateQuestion() {
          const selectedLanguage = document.querySelector('input[name="coding_language"]:checked').value;
          const selectedSkillLevel = document.querySelector('input[name="skill_level"]:checked').value;
          const questionElement = document.getElementById('question_text');

          if (allQuestions[selectedLanguage] && allQuestions[selectedLanguage][selectedSkillLevel]) {
              const questionsForLevel = allQuestions[selectedLanguage][selectedSkillLevel];
              // Select a random question from the filtered list
              const randomQuestion = questionsForLevel[Math.floor(Math.random() * questionsForLevel.length)];
              questionElement.textContent = randomQuestion.question;
          } else {
              questionElement.textContent = "Please select a language and skill level.";
          }
      }

      // Initialize question display on page load
      document.addEventListener('DOMContentLoaded', () => {
          updateQuestion(); // Call once on load to set initial question
      });
    </script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
  </body>
</html>
